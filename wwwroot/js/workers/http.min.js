function parse(e){return JSON.parse(e.data)}function stringify(e){return JSON.stringify(e)}function post(e){postMessage(stringify(e)),e.canTerminate&&close()}function encodeUriQuery(e,n){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,n?"%20":"+")}function isObject(e){return null!==e&&"object"==typeof e}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isDate(e){return"[object Date]"===toString.call(e)}function isWindow(e){return e&&e.window===e}function isScope(e){return e&&e.$evalAsync&&e.$watch}function isFile(e){return"[object File]"===toString.call(e)}function isFormData(e){return"[object FormData]"===toString.call(e)}function isBlob(e){return"[object Blob]"===toString.call(e)}function isBoolean(e){return"boolean"==typeof e}function serializeValue(e){return isObject(e)?isDate(e)?e.toISOString():toJson(e):e}function toJsonReplacer(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:isWindow(n)?r="$WINDOW":n&&document===n?r="$DOCUMENT":isScope(n)&&(r="$SCOPE"),r}function toJson(e,n){return"undefined"!=typeof e?(isNumber(n)||(n=n?2:null),JSON.stringify(e,toJsonReplacer,n)):void 0}function fromJson(e){return isString(e)?JSON.parse(e):e}function getParams(e){if(!e)return"";var n=[];for(var r in e){var t=e[r];if(null===t||void 0===t)return;if(Array.isArray(t))for(var o=0;o<t.length;o++)n.push(encodeUriQuery(r)+"="+encodeUriQuery(serializeValue(t[o])));else n.push(encodeUriQuery(r)+"="+encodeUriQuery(serializeValue(t)))}return"?"+n.join("&")}this.onmessage=function(e){var n=parse(e);try{var r=new XMLHttpRequest,t=function(e,r,t,o){var i={id:n.id,status:e,response:{data:r,headers:t,statusText:o,status:e}};post(i)},o=function(){var e=r.statusText||"",o="response"in r?r.response:r.responseText,i=1223===r.status?204:r.status;0===i&&(i=o?200:0===n.url.indexOf("file://")?404:0),t(i,o,r.getAllResponseHeaders(),e)},i=function(){t(-1,null,null,"")};r.onload=o,r.onerror=i,r.onabort=i;var s=getParams(n.params)||"";r.open(n.method.toUpperCase(),n.url+s,!0);for(var a in n.headers)void 0!==n.headers[a]&&r.setRequestHeader(a,n.headers[a]);if(n.withCredentials&&(r.withCredentials=!0),n.responseType)try{r.responseType=n.responseType}catch(e){if("json"!==n.responseType)throw e}r.send(void 0!==n.data?n.data:null)}catch(u){i()}};